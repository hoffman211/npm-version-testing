<!DOCTYPE html>
<html>
<title>Chrysler Analytics | Change Log</title>

<xmp theme="spacelab" style="display:none;">

<!--
//sample code for new versions

### v1.1.0
#### New Features
* this is a desc for the new feature [(atTask)](#)

***

### v1.0.1
#### Bug Fixes
* this is a desc for the bug [(atTask)](#)
* this is a desc for the bug [(atTask)](#)

***
-->

### v1.0.0
* Initial version

### v1.0.1
#### Bug Fixes | Patch
* Campaign conversions not firing on goal pages. [(atTask)](https://sapient.attask-ondemand.com/issue/view?ID=529e7e220044ce1dcf43bd78ee0e73c0)

__Update pending approval from Anametrix.__
The cs object originally only contained Campaign (cs.cmp) information. This object now also contains PageGroup (cs.pg) information. The condition to determine wheather or not to remove a registered campaign needed an update to scope the cmp property specifically.
	
	File: vendor.js 
	Function Name: d3()
	Updated: Near line 733
	ORIGINAL CODE: if (s2 > 0 && (gj(cs).length > 1000))
	UPDATED CODE: if (s2 > 0 && (gj(cs['cmp']).length > 1000))

__Update approved by Anametrix : 3/25/2014 - Implementation in progress__


### v1.1.0
#### Bug Fixes | Minor

* This is a change in logic based on inconsistencies found in the way links are being coded.
* The change internal to the tracking code is for stability while changes are being made to the external code controlling the logic in question.
	

	File: base.js 
	Function Name: bindLinks()
	Updated: Near line 96 

&#10;

	<script type="text/javascript">
	bindLinks: function() {
		cas.$('body').on('click', 'a, [data-link-track]', function(e) {
			var _target = cas.$(e.currentTarget);

				/*
				Transitional code in place while external code update is in progress. 
				After the update is complete then these conditions will be removed.
				*/

				if(!_target.data("originlid") && _target.data("lid"))
				{
					_target.data("originlid",_target.data("lid"));
				}
				else if(_target.data("lid") && _target.attr('data-lid') !== _target.data("lid"))
				{
					
					//This checks - If the attribute has changed
					(_target.attr('data-lid') !== _target.data("originlid"))
						?_target.data("lid",_target.attr('data-lid'))
						:_target.attr('data-lid',_target.data("lid"));

					_target.data("originlid",_target.data("lid"));
				
				};

				/*
				Original code : _data = _target.data().
				The expected value does not update if the physical attribute value has changed but not the data object. 

				In some scripts the code is updating the data object and while others are updating the attribute. 
				This change means updating the code where the data object is manipulated and update it to 
				manipulate the attribute itself. 
				*/
			var _data = {
					lid: _target.attr('data-lid'),
					lpos: _target.attr('data-lpos'),
					trackingPagetrack: _target.attr('data-tracking-pagetrack'),
					trackingId: _target.attr('data-tracking-id'),
					target: _target
				};
			
			//check to see if linkTrack is disabled in the DOM
			if (!_data.stoptrack && !_data.donottrack) cas.actions.linkTrack(_data,_target);
		});
	}
	</script>


### v1.1.1
#### Bug Fixes | Patch

* Issue discovered while validating [(AtTask Issue: 105047)](https://sapient.attask-ondemand.com/issue/view?ID=53342ecb0020ce459f7743e83440987f)
* We realized when using cas.actions.attrInjection, the resulting page track call did not contain the boolean to 
trigger the check for PageGroups and Goal pages.
* Boolean value of true in the third attribute has been added to the call to the setPageTrackVariables function.


	File: base.js 
	Function Name: attrInjection()
	Updated: Near line 813 

&#10;


	<script type="text/javascript">
		attrInjection: function(argInject, argAddPT, override) {
			/*siteAction('legacy',param2 + location.href);*/
			if (typeof(override) == "undefined") override = false;

			//console.log(argInject);
			cas.pvvAttrInjection.ai = {};

			if (typeof(argInject) == 'object') {
				for (var x in argInject) {
					if (/a_\d/.test(x)) {
						cas.pvvAttrInjection.ai['p.' + x] = argInject[x];
					} else {
						cas.pvvAttrInjection.ai['p.a_' + (argInject[x])] = x;
					}
				}
			}
			(argAddPT != '') ? cas.actions.setPageTrackVariables(argAddPT, override, true) : cas.actions.setPageTrackVariables("","",true);
		},
	</script>


### v1.1.2
#### Bug Fixes | Patch

* With the change in logic we also needed to account for the donottrack and stoptrack data attributes.
	

	File: base.js 
	Function Name: bindLinks()
	Updated: Function - Near line 96 

&#10;

	<script type="text/javascript">
	bindLinks: function() {
			[...code...]

			if(_target.data.donottrack){_data['donottrack']=_target.data.donottrack}
			if(_target.data.stoptrack){_data['stoptrack']=_target.data.stoptrack}
			
			[...code...]
		});
	}
	</script>


### v1.1.3 & v1.1.4
#### Bug Fixes | Patch

* Minor update to the donottrack condition.


### v1.1.5
#### Bug Fixes | Patch

* Goal ID for DRLP updated condition to account for "current offers" now that the domains are back in our control.

&#10;

	<script type="text/javascript">
	//method : cas.goals.pageGroupsAndGoals(pgVal ,goalTrack)
	[...code...]
	else if(/drlp/.test(pgVal))
		{
			if(/drlp\/currentoffers/.test(pgVal))
			{
				cas.pageTrackVariables['goal'] = {
					id: cas.brand.substring(0,1).toUpperCase() + cas.brand.substring(1)+"CurrentOffers"
				};
			}
			else
			{
				cas.pageTrackVariables['goal'] = {
					id: cas.brand.substring(0,1).toUpperCase() + cas.brand.substring(1)+"Dealer"
				};	
			}
			
		}
	[...code...]
	</script>

### v1.1.6
#### Bug Fixes | Patch

* We discovered an issue where pages in the brand sites are being pulled into iframes on a number of black-list sites. How or why has not been determined.
* If the window of the document is a 0x0 then it has been pulled into an iframe and we will not run tracking.

&#10;

	<script type="text/javascript">
	//method : cas.utils.checkWindow()

	checkWindow : function(){
		 var w = window,
		    d = document,
		    e = d.documentElement,
		    g = d.getElementsByTagName('body')[0],
		    x = w.innerWidth || e.clientWidth || g.clientWidth,
		    y = w.innerHeight|| e.clientHeight|| g.clientHeight;
		    if (x <= 50 || y <= 50) {
		        
				nr_t.sendGwReq = function(){};
		    }

		},

	</script>


### v1.1.7
#### Bug Fixes | Patch

* Goal ID for DRLP updated condition for "current offers". For Ram and Fiat there was a need for override values. 
* RamTrucksCurrentOffers changed to RamTruckCurrentOffers and FiatUsaCurrentOffers changed to BuyFiatCurrentOffers

&#10;

	<script type="text/javascript">
	//method : cas.goals.pageGroupsAndGoals(pgVal ,goalTrack)
	[...code...]
	else if(/drlp/.test(pgVal))
		{
			if(/drlp\/currentoffers/.test(pgVal))
			{
				/*Variable created to handle this condition and leveraged in the Goal ID*/
				var tempBrand = (cas.brand == "ramtrucks")?"ramTruck":(cas.brand == "fiatusa")?"buyFiat":cas.brand;
				cas.pageTrackVariables['goal'] = {
					id: tempBrand.substring(0,1).toUpperCase() + tempBrand.substring(1)+"CurrentOffers"
				};
			}
			else
			{	/*No Change*/
				cas.pageTrackVariables['goal'] = {
					id: cas.brand.substring(0,1).toUpperCase() + cas.brand.substring(1)+"Dealer"
				};	
			}
			
		}
	[...code...]
	</script>



</xmp>

<script src="../_includes/strapdown/v/0.2/strapdown.js"></script>
</html>